<!-- /partials/lenbot.html -->

<!-- dotLottie loader (safe for dynamic includes) -->
<script type="module">
  if (!customElements.get("dotlottie-wc")) {
    const s = document.createElement("script");
    s.type = "module";
    s.src = "https://unpkg.com/@lottiefiles/dotlottie-wc@0.8.11/dist/dotlottie-wc.js";
    document.head.appendChild(s);
  }
</script>

<style>
  .vlp-lenbot-canva {
    bottom: 16px;
    box-shadow: 0 18px 50px rgba(0,0,0,0.18);
    color: rgba(255,255,255,0.92);
    font-family: Raleway, Inter, system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, sans-serif;
    max-width: 420px;
    pointer-events: auto;
    position: fixed;
    right: 16px;
    width: calc(100vw - 32px);
    z-index: 9998;
  }

  .vlp-lenbot-canva__wrap {
    align-items: center;
    backdrop-filter: blur(10px);
    background: rgba(255,255,255,0.06);
    border: 1px solid rgba(255,255,255,0.10);
    border-radius: 22px;
    display: flex;
    gap: 14px;
    padding: 18px 16px 16px 16px;
  }

  .vlp-lenbot-canva__avatar {
    flex: 0 0 auto;
  }

  .vlp-lenbot-canva__glow {
    align-items: center;
    background: radial-gradient(circle at 50% 50%, rgba(249,115,22,0.35), rgba(249,115,22,0) 62%);
    border-radius: 999px;
    display: flex;
    justify-content: center;
    padding: 10px;
  }

  .vlp-lenbot-canva__copy {
    flex: 1 1 auto;
    min-width: 0;
  }

  .vlp-lenbot-canva__title {
    font-size: 14px;
    font-weight: 800;
    margin: 0;
  }

  .vlp-lenbot-canva__text {
    color: rgba(255,255,255,0.80);
    font-size: 13px;
    line-height: 1.55;
    margin: 8px 0 0 0;
  }

  .vlp-lenbot-canva__note {
    color: rgba(255,255,255,0.70);
    font-size: 12px;
    line-height: 1.45;
    margin: 8px 0 12px 0;
  }

  .vlp-lenbot-canva__btn {
    align-items: center;
    background: rgba(249,115,22,1);
    border-radius: 14px;
    color: #0b1220;
    display: inline-flex;
    font-size: 13px;
    font-weight: 800;
    gap: 10px;
    justify-content: center;
    padding: 12px 14px;
    text-decoration: none;
    width: 100%;
  }

  .vlp-lenbot-canva__btn:hover {
    opacity: 0.95;
  }

  .vlp-lenbot-canva__close {
    align-items: center;
    background: rgba(255,255,255,0.08);
    border: 1px solid rgba(255,255,255,0.14);
    border-radius: 12px;
    color: rgba(255,255,255,0.85);
    cursor: pointer;
    display: inline-flex;
    font-size: 18px;
    height: 36px;
    justify-content: center;
    line-height: 1;
    position: absolute;
    right: 10px;
    top: 10px;
    width: 36px;
    z-index: 5; /* FIX: ensure close button renders above card */
  }

  .vlp-lenbot-canva__close:hover {
    background: rgba(255,255,255,0.12);
    border-color: rgba(255,255,255,0.20);
  }

  @media (min-width: 768px) {
    .vlp-lenbot-canva {
      bottom: 20px;
      right: 20px;
      width: 420px;
    }
  }
</style>

<div
  class="vlp-lenbot-canva"
  role="complementary"
  aria-label="LenBot chat assistant"
>
  <button
    class="vlp-lenbot-canva__close"
    type="button"
    aria-label="Close LenBot"
    data-lenbot-close
  >
    Ã—
  </button>

  <div class="vlp-lenbot-canva__wrap">
    <div class="vlp-lenbot-canva__avatar">
      <div class="vlp-lenbot-canva__glow" aria-hidden="true">
        <dotlottie-wc
          src="https://lottie.host/9f523067-3718-408e-9786-a5c0592f9dca/VirT6wayHa.lottie"
          autoplay
          loop
          style="display:block;width:96px;height:96px"
          aria-hidden="true"
        ></dotlottie-wc>
      </div>
    </div>

    <div class="vlp-lenbot-canva__copy">
      <h3 class="vlp-lenbot-canva__title">LenBot is here</h3>

      <p class="vlp-lenbot-canva__text">
        I help visitors figure out which Virtual Launch Pro install to start with,
        how setup works, and whether this is the right fit for their business.
      </p>

      <p class="vlp-lenbot-canva__note">
        Click the button below to open me in a new page.
      </p>

      <a
        class="vlp-lenbot-canva__btn"
        href="https://get-started-virtual-launch-pro.zapier.app/chat"
        target="_blank"
        rel="noopener noreferrer"
      >
        Open LenBot
      </a>
    </div>
  </div>
</div>

<script>
  (function () {
    const btn = document.querySelector('[data-lenbot-close]');
    if (!btn) return;

    btn.addEventListener('click', function (e) {
      e.preventDefault();
      const shell = btn.closest('.vlp-lenbot-canva');
      if (shell) shell.style.display = 'none';
    });
  })();
</script>
